"use strict";(self["webpackChunkoldman_web"]=self["webpackChunkoldman_web"]||[]).push([[643],{3643:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"body"},[e._m(0),t("div",{staticClass:"nav_body"},["basicInfo"===e.showSection?t("div",{staticClass:"nav_body_font"},[e._v("基本资料")]):e._e(),"basicInfo"===e.showSection?t("div",{staticClass:"nav_body_body"},[t("span",[e._v("昵称: "+e._s(e.username))]),t("br"),t("span",[e._v("性别: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{id:"man",type:"radio",value:"1"},domProps:{checked:"1"===e.gender,checked:e._q(e.gender,"1")},on:{change:function(t){e.gender="1"}}}),e._v("男 "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.gender,expression:"gender"}],attrs:{type:"radio",id:"woman",value:"0"},domProps:{checked:"0"===e.gender,checked:e._q(e.gender,"0")},on:{change:function(t){e.gender="0"}}}),e._v("女 ")]),t("br"),t("span",{staticStyle:{position:"relative",right:"1.3vw"}},[e._v("手机号: "+e._s(e.phone))]),t("br"),t("span",[e._v("签名: "+e._s(e.faction))]),t("button",{staticStyle:{position:"relative",bottom:"44vh",left:"42vw",width:"4vw",height:"3vh",color:"white","background-color":"rgb(92, 173, 255)","border-color":"aliceblue"},on:{click:function(t){return e.handleClick("父组件")}}},[e._v("操作")]),e.Visiable?t("dialog-component",{ref:"dialog"}):e._e()],1):e._e(),"changePassword"===e.showSection?t("div",{staticClass:"nav_body_font"},[e._v("修改密码")]):e._e(),"changePassword"===e.showSection?t("div",{staticClass:"nav_body_body"},[t("span",[e._v("原密码: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword,expression:"oldPassword"}],staticStyle:{"border-color":"aliceblue",width:"20vw"},attrs:{type:"text"},domProps:{value:e.oldPassword},on:{input:function(t){t.target.composing||(e.oldPassword=t.target.value)}}})]),t("br"),t("span",[e._v("新密码: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],staticStyle:{"border-color":"aliceblue",width:"20vw"},attrs:{type:"text"},domProps:{value:e.newPassword},on:{input:function(t){t.target.composing||(e.newPassword=t.target.value)}}})]),t("br"),t("span",{staticStyle:{right:"1.5vw"}},[e._v("确认密码: "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.IsnewPassword,expression:"IsnewPassword"}],staticStyle:{"border-color":"aliceblue",width:"20vw"},attrs:{type:"text"},domProps:{value:e.IsnewPassword},on:{input:function(t){t.target.composing||(e.IsnewPassword=t.target.value)}}})]),t("br"),t("button",{staticClass:"btn",on:{click:e.changePassword}},[e._v("保存")])]):e._e()]),e._m(1),t("div",{staticClass:"left_nav_name"},[e._v("智韵天成")]),t("div",{staticClass:"left_nav"},[t("button",{attrs:{id:"nav1"},on:{click:function(t){e.showSection="basicInfo"}}},[e._v("基本资料")]),t("button",{attrs:{id:"nav2"},on:{click:function(t){e.showSection="changeAvatar"}}},[e._v("更改头像")]),t("button",{attrs:{id:"nav3"},on:{click:function(t){e.showSection="changePassword"}}},[e._v("修改密码")]),t("button",{attrs:{id:"nav4"},on:{click:function(t){e.showSection="aboutUs"}}},[e._v("关于我们")])])])},n=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"nav_header"},[t("img",{attrs:{src:"img/logo.png",alt:""}}),t("span",{staticClass:"span1"},[e._v("oldman_healthy")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"left_nav_img"},[t("img",{attrs:{src:"img/robot.png",alt:""}})])}],s=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"更新",visible:e.detailVisible,width:"35%"},on:{"update:visible":function(t){e.detailVisible=t}}},[t("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"80px",model:e.formLabelAlign}},[t("el-form-item",{attrs:{label:"昵称"}},[t("el-input",{model:{value:e.formLabelAlign.username,callback:function(t){e.$set(e.formLabelAlign,"username",t)},expression:"formLabelAlign.username"}})],1),t("el-form-item",{attrs:{label:"手机号"}},[t("el-input",{model:{value:e.formLabelAlign.phone,callback:function(t){e.$set(e.formLabelAlign,"phone",t)},expression:"formLabelAlign.phone"}})],1),t("el-form-item",{attrs:{label:"签名"}},[t("el-input",{model:{value:e.formLabelAlign.faction,callback:function(t){e.$set(e.formLabelAlign,"faction",t)},expression:"formLabelAlign.faction"}})],1),t("el-button",{staticStyle:{width:"10vw",height:"6vh","font-size":"20px","padding-top":"0.5vh","margin-left":"11vw"},attrs:{type:"primary",round:""},on:{click:e.save}},[e._v("保存")])],1)],1)},i=[],l={name:"dialogComponent",data(){return{detailVisible:!1,labelPosition:"right",formLabelAlign:{username:"",phone:"",faction:""}}},methods:{init(e){this.detailVisible=!0,this.fetchData(e)},fetchData(){const e=localStorage.getItem("id");this.$axios.get(`/api/oldman/get/${e}`).then((e=>{if(200===e.data.code){const t=e.data.data;this.formLabelAlign={username:t.username,phone:t.phone,faction:t.faction},console.log(t)}else alert("获取数据失败")})).catch((e=>{e.response?(console.error("服务器响应错误:",e.response.data),console.error("状态码:",e.response.status),console.error("响应头:",e.response.headers),alert("获取数据失败: "+e.response.data.message)):e.request?console.error(e.request):console.error("Error",e.message),alert("获取数据失败")}))},save(){const e=localStorage.getItem("id","username","phone","faction");this.$axios.put(`/api/oldman/save/${e}`,{username:this.formLabelAlign.username,phone:this.formLabelAlign.phone,faction:this.formLabelAlign.faction}).then((e=>{200===e.data.code?(localStorage.setItem("username",this.formLabelAlign.username),localStorage.setItem("phone",this.formLabelAlign.phone),localStorage.setItem("faction",this.formLabelAlign.faction),alert("更新成功")):alert("更新失败")})).catch((e=>{console.error("更新失败:",e),alert("更新失败")}))}}},r=l,c=a(1656),d=(0,c.A)(r,s,i,!1,null,null,null),m=d.exports,u={data(){return{showSection:"basicInfo",username:"",gender:1,faction:"",phone:"",oldPassword:"",newPassword:"",IsnewPassword:"",Visiable:!1}},components:{dialogComponent:m},created(){this.username=localStorage.getItem("username")||"默认用户名",this.gender=localStorage.getItem("gender")||1,this.faction=localStorage.getItem("faction")||"默认签名",this.phone=localStorage.getItem("phone")||"默认手机号"},methods:{handleClick(e){this.Visiable=!0,this.$nextTick((()=>{this.$refs.dialog.init(e)}))}}},v=u,h=(0,c.A)(v,o,n,!1,null,null,null),g=h.exports}}]);
//# sourceMappingURL=643.e66f43ff.js.map