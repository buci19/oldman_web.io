"use strict";(self["webpackChunkoldman_web"]=self["webpackChunkoldman_web"]||[]).push([[39],{5039:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-center"},[e._m(0),t("div",{staticClass:"main-content"},[t("aside",{staticClass:"sidebar"},[e._m(1),t("nav",{staticClass:"nav-menu"},[t("button",{class:["nav-item",{active:"basicInfo"===e.showSection}],on:{click:function(t){e.showSection="basicInfo"}}},[e._v("基本资料")]),t("button",{class:["nav-item",{active:"changePassword"===e.showSection}],on:{click:function(t){e.showSection="changePassword"}}},[e._v("修改密码")]),t("button",{class:["nav-item",{active:"aboutUs"===e.showSection}],on:{click:function(t){e.showSection="aboutUs"}}},[e._v("关于我们")])])]),t("main",{staticClass:"content"},["basicInfo"===e.showSection?t("section",{staticClass:"section-content"},[t("h2",{staticClass:"section-title"},[e._v("基本资料")]),t("div",{staticClass:"form-content"},[t("div",{staticClass:"form-column"},[t("div",{staticClass:"form-item"},[t("label",[e._v("昵称：")]),t("span",{domProps:{textContent:e._s(e.username)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("手机号：")]),t("span",{domProps:{textContent:e._s(e.phone)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("年龄：")]),t("span",{domProps:{textContent:e._s(e.age)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("身高(cm)：")]),t("span",{domProps:{textContent:e._s(e.height)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("体重(kg)：")]),t("span",{domProps:{textContent:e._s(e.weight)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("血型：")]),t("span",{domProps:{textContent:e._s(e.bloodType)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("签名：")]),t("span",{domProps:{textContent:e._s(e.faction)}})])]),t("div",{staticClass:"form-column"},[t("div",{staticClass:"form-item"},[t("label",[e._v("紧急联系人：")]),t("span",{domProps:{textContent:e._s(e.emergencyContact)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("紧急电话：")]),t("span",{domProps:{textContent:e._s(e.emergencyPhone)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("过敏史：")]),t("span",{domProps:{textContent:e._s(e.allergies)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("慢性病史：")]),t("span",{domProps:{textContent:e._s(e.chronicDiseases)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("所在地区：")]),t("span",{domProps:{textContent:e._s(e.address)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("兴趣爱好：")]),t("span",{domProps:{textContent:e._s(e.hobbies)}})])])]),t("div",[t("button",{staticClass:"btn-primary",on:{click:function(t){return e.handleClick("编辑资料")}}},[e._v("编辑")])])]):e._e(),"changePassword"===e.showSection?t("section",{staticClass:"section-content"},[t("h2",{staticClass:"section-title"},[e._v("修改密码")]),t("div",{staticClass:"password-form"},[t("div",{staticClass:"form-item"},[t("label",[e._v("原密码：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword,expression:"oldPassword"}],staticClass:"input",attrs:{type:"password"},domProps:{value:e.oldPassword},on:{input:function(t){t.target.composing||(e.oldPassword=t.target.value)}}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("新密码：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],staticClass:"input",attrs:{type:"password"},domProps:{value:e.newPassword},on:{input:function(t){t.target.composing||(e.newPassword=t.target.value)}}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("确认密码：")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.IsnewPassword,expression:"IsnewPassword"}],staticClass:"input",attrs:{type:"password"},domProps:{value:e.IsnewPassword},on:{input:function(t){t.target.composing||(e.IsnewPassword=t.target.value)}}})])]),t("div",[t("button",{staticClass:"btn-primary",on:{click:e.changePassword}},[e._v("保存")])])]):e._e(),"aboutUs"===e.showSection?t("section",{staticClass:"section-content about-us"},[t("h2",{staticClass:"section-title"},[e._v("关于我们")]),e._m(2)]):e._e()])]),e.Visiable?t("dialog-component",{ref:"dialog"}):e._e()],1)},l=[function(){var e=this,t=e._self._c;return t("header",{staticClass:"header"},[t("div",{staticClass:"header-content"},[t("img",{attrs:{src:"img/logo.png",alt:"logo"}}),t("span",{staticClass:"header-title"},[e._v("oldman_healthy")])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-profile"},[t("div",{staticClass:"avatar"},[t("img",{attrs:{src:"img/robot.png",alt:"用户头像"}})]),t("div",{staticClass:"username"},[e._v("智韵天成")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"about-content"},[t("div",{staticClass:"about-section"},[t("h3",[e._v("公司简介")]),t("p",[e._v("智韵天成致力于为老年人提供智能健康管理服务，让科技守护健康。")])]),t("div",{staticClass:"about-section"},[t("h3",[e._v("核心价值观")]),t("div",{staticClass:"values-grid"},[t("div",{staticClass:"value-item"},[t("i",{staticClass:"value-icon"},[e._v("❤️")]),t("p",[e._v("关爱为本")])]),t("div",{staticClass:"value-item"},[t("i",{staticClass:"value-icon"},[e._v("🔬")]),t("p",[e._v("科技创新")])]),t("div",{staticClass:"value-item"},[t("i",{staticClass:"value-icon"},[e._v("🤝")]),t("p",[e._v("专业服务")])])])]),t("div",{staticClass:"about-section"},[t("h3",[e._v("联系我们")]),t("div",{staticClass:"contact-info"},[t("p",[t("i",{staticClass:"contact-icon"},[e._v("📞")]),e._v(" 17507522648")]),t("p",[t("i",{staticClass:"contact-icon"},[e._v("✉️")]),e._v(" 2106476452@qq.com")])])])])}],o=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"更新",visible:e.detailVisible,width:"60%","custom-class":"custom-dialog"},on:{"update:visible":function(t){e.detailVisible=t}}},[t("el-form",{staticClass:"form-container",attrs:{"label-position":e.labelPosition,"label-width":"100px",model:e.formLabelAlign}},[t("div",{staticClass:"form-column"},[t("el-form-item",{attrs:{label:"昵称"}},[t("el-input",{attrs:{placeholder:"请输入昵称"},model:{value:e.formLabelAlign.username,callback:function(t){e.$set(e.formLabelAlign,"username",t)},expression:"formLabelAlign.username"}})],1),t("el-form-item",{attrs:{label:"手机号"}},[t("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.formLabelAlign.phone,callback:function(t){e.$set(e.formLabelAlign,"phone",t)},expression:"formLabelAlign.phone"}})],1),t("el-form-item",{attrs:{label:"年龄"}},[t("el-input",{attrs:{placeholder:"请输入年龄"},model:{value:e.formLabelAlign.age,callback:function(t){e.$set(e.formLabelAlign,"age",t)},expression:"formLabelAlign.age"}})],1),t("el-form-item",{attrs:{label:"身高"}},[t("el-input",{attrs:{placeholder:"请输入身高(cm)"},model:{value:e.formLabelAlign.height,callback:function(t){e.$set(e.formLabelAlign,"height",t)},expression:"formLabelAlign.height"}})],1),t("el-form-item",{attrs:{label:"体重"}},[t("el-input",{attrs:{placeholder:"请输入体重(kg)"},model:{value:e.formLabelAlign.weight,callback:function(t){e.$set(e.formLabelAlign,"weight",t)},expression:"formLabelAlign.weight"}})],1),t("el-form-item",{attrs:{label:"血型"}},[t("el-select",{attrs:{placeholder:"请选择血型"},model:{value:e.formLabelAlign.bloodType,callback:function(t){e.$set(e.formLabelAlign,"bloodType",t)},expression:"formLabelAlign.bloodType"}},[t("el-option",{attrs:{label:"A型",value:"A"}}),t("el-option",{attrs:{label:"B型",value:"B"}}),t("el-option",{attrs:{label:"O型",value:"O"}}),t("el-option",{attrs:{label:"AB型",value:"AB"}})],1)],1),t("el-form-item",{attrs:{label:"兴趣爱好"}},[t("el-select",{attrs:{multiple:"",placeholder:"请选择您的兴趣爱好"},model:{value:e.formLabelAlign.hobbies,callback:function(t){e.$set(e.formLabelAlign,"hobbies",t)},expression:"formLabelAlign.hobbies"}},e._l(e.hobbyOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("div",{staticClass:"form-column"},[t("el-form-item",{attrs:{label:"紧急联系人"}},[t("el-input",{staticStyle:{"min-width":"200px"},attrs:{placeholder:"请输入紧急联系人姓名"},model:{value:e.formLabelAlign.emergencyContact,callback:function(t){e.$set(e.formLabelAlign,"emergencyContact",t)},expression:"formLabelAlign.emergencyContact"}})],1),t("el-form-item",{attrs:{label:"紧急电话"}},[t("el-input",{attrs:{placeholder:"请输入紧急联系电话"},model:{value:e.formLabelAlign.emergencyPhone,callback:function(t){e.$set(e.formLabelAlign,"emergencyPhone",t)},expression:"formLabelAlign.emergencyPhone"}})],1),t("el-form-item",{attrs:{label:"过敏史"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入过敏史"},model:{value:e.formLabelAlign.allergies,callback:function(t){e.$set(e.formLabelAlign,"allergies",t)},expression:"formLabelAlign.allergies"}})],1),t("el-form-item",{attrs:{label:"慢性病史"}},[t("el-input",{attrs:{type:"textarea",placeholder:"请输入慢性病史"},model:{value:e.formLabelAlign.chronicDiseases,callback:function(t){e.$set(e.formLabelAlign,"chronicDiseases",t)},expression:"formLabelAlign.chronicDiseases"}})],1),t("el-form-item",{attrs:{label:"签名"}},[t("el-input",{attrs:{placeholder:"请输入签名，不能超过126个字"},model:{value:e.formLabelAlign.faction,callback:function(t){e.$set(e.formLabelAlign,"faction",t)},expression:"formLabelAlign.faction"}})],1),t("el-form-item",{attrs:{label:"地区"}},[t("el-select",{attrs:{placeholder:"请选择您的地区"},model:{value:e.formLabelAlign.address,callback:function(t){e.$set(e.formLabelAlign,"address",t)},expression:"formLabelAlign.address"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)]),t("div",{staticClass:"dialog-footer"},[t("el-button",{attrs:{type:"primary",round:""},on:{click:e.save}},[e._v("保存")])],1)],1)},i=[],n={name:"dialogComponent",data(){return{detailVisible:!1,labelPosition:"right",formLabelAlign:{username:"",phone:"",faction:""},hobbyOptions:[{value:"阅读",label:"阅读"},{value:"下棋",label:"下棋"},{value:"书法",label:"书法"},{value:"绘画",label:"绘画"},{value:"园艺",label:"园艺"},{value:"太极",label:"太极"}],options:[{value:"北京",label:"北京"},{value:"上海",label:"上海"},{value:"广东",label:"广东"},{value:"安徽",label:"安徽"},{value:"河南",label:"河南"},{value:"其他",label:"其他"}],value:""}},methods:{init(e){this.detailVisible=!0,this.fetchData(e)},fetchData(){const e=localStorage.getItem("id");this.$axios.get(`/api/oldman/get/${e}`).then((e=>{if(200===e.data.code){const t=e.data.data;this.formLabelAlign={username:t.username,phone:t.phone,faction:t.faction,address:t.address,hobbies:t.hobbies,age:t.age,height:t.height,weight:t.weight,bloodType:t.bloodType,emergencyContact:t.emergencyContact,emergencyPhone:t.emergencyPhone,allergies:t.allergies,chronicDiseases:t.chronicDiseases},console.log(t)}else this.$message.error("获取数据失败")})).catch((e=>{e.response?(console.error("服务器响应错误:",e.response.data),console.error("状态码:",e.response.status),console.error("响应头:",e.response.headers),this.$message.error("获取数据失败: "+e.response.data.message)):e.request?console.error(e.request):console.error("Error",e.message),this.$message.error("获取数据失败")}))},save(){const e=localStorage.getItem("id"),t=Array.isArray(this.formLabelAlign.hobbies)?this.formLabelAlign.hobbies.join(","):"";this.$axios.put(`/api/oldman/save/${e}`,{username:this.formLabelAlign.username,phone:this.formLabelAlign.phone,faction:this.formLabelAlign.faction,address:this.formLabelAlign.address,hobbies:t,age:this.formLabelAlign.age,height:this.formLabelAlign.height,weight:this.formLabelAlign.weight,bloodType:this.formLabelAlign.bloodType,emergencyContact:this.formLabelAlign.emergencyContact,emergencyPhone:this.formLabelAlign.emergencyPhone,allergies:this.formLabelAlign.allergies,chronicDiseases:this.formLabelAlign.chronicDiseases}).then((e=>{200===e.data.code?(localStorage.setItem("username",this.formLabelAlign.username),localStorage.setItem("phone",this.formLabelAlign.phone),localStorage.setItem("faction",this.formLabelAlign.faction),localStorage.setItem("address",this.formLabelAlign.address),localStorage.setItem("hobbies",JSON.stringify(t)),localStorage.setItem("age",this.formLabelAlign.age),localStorage.setItem("height",this.formLabelAlign.height),localStorage.setItem("weight",this.formLabelAlign.weight),localStorage.setItem("bloodType",this.formLabelAlign.bloodType),localStorage.setItem("emergencyContact",this.formLabelAlign.emergencyContact),localStorage.setItem("emergencyPhone",this.formLabelAlign.emergencyPhone),localStorage.setItem("allergies",this.formLabelAlign.allergies),localStorage.setItem("chronicDiseases",this.formLabelAlign.chronicDiseases),this.$message.success("更新成功"),this.detailVisible=!1,window.location.reload()):this.$message.error("更新失败，请检查输入是否正确")})).catch((e=>{console.error("更新失败:",e),this.$message.error("更新失败，请检查输入是否正确")}))}}},r=n,c=a(1656),m=(0,c.A)(r,o,i,!1,null,"feae5dce",null),g=m.exports,d={name:"UserCenter",components:{dialogComponent:g},data(){return{showSection:"basicInfo",username:"",gender:"0",faction:"",phone:"",address:"",oldPassword:"",newPassword:"",IsnewPassword:"",Visiable:!1,hobbies:"",age:"",height:"",weight:"",bloodType:"",emergencyContact:"",emergencyPhone:"",allergies:"",chronicDiseases:""}},created(){this.initUserInfo()},methods:{async initUserInfo(){this.username=(localStorage.getItem("username")||"默认用户名").replace(/['"]/g,""),this.gender=(localStorage.getItem("gender")||"0").replace(/['"]/g,""),this.faction=(localStorage.getItem("faction")||"默认签名").replace(/['"]/g,""),this.phone=(localStorage.getItem("phone")||"默认手机号").replace(/['"]/g,""),this.address=(localStorage.getItem("address")||"默认地址").replace(/['"]/g,""),this.hobbies=(localStorage.getItem("hobbies")||"暂无兴趣爱好").replace(/['"]/g,""),this.age=(localStorage.getItem("age")||"未设置").replace(/['"]/g,""),this.height=(localStorage.getItem("height")||"未设置").replace(/['"]/g,""),this.weight=(localStorage.getItem("weight")||"未设置").replace(/['"]/g,""),this.bloodType=(localStorage.getItem("bloodType")||"未设置").replace(/['"]/g,""),this.emergencyContact=(localStorage.getItem("emergencyContact")||"未设置").replace(/['"]/g,""),this.emergencyPhone=(localStorage.getItem("emergencyPhone")||"未设置").replace(/['"]/g,""),this.allergies=(localStorage.getItem("allergies")||"无").replace(/['"]/g,""),this.chronicDiseases=(localStorage.getItem("chronicDiseases")||"无").replace(/['"]/g,"")},handleClick(e){this.Visiable=!0,this.$nextTick((()=>{this.$refs.dialog.init(e)}))},async changePassword(){if(this.validatePasswordForm())try{const e=localStorage.getItem("id"),t=await this.$axios.post(`/api/oldman/changePassword/${e}`,{password:this.IsnewPassword});200===t.data.code?(this.$message.success("密码修改成功"),this.resetPasswordForm()):this.$message.error(t.data.message||"密码修改失败")}catch(e){console.error("修改密码失败:",e),this.$message.error("密码修改失败，请稍后重试")}},validatePasswordForm(){return this.oldPassword&&this.newPassword&&this.IsnewPassword?this.newPassword!==this.IsnewPassword?(this.$message.warning("两次输入的新密码不一致"),!1):!(this.newPassword.length<6)||(this.$message.warning("新密码长度不能少于6位"),!1):(this.$message.warning("请填写完整的密码信息"),!1)},resetPasswordForm(){this.oldPassword="",this.newPassword="",this.IsnewPassword=""},async updateUserInfo(e){try{const t=localStorage.getItem("id"),a=await this.$axios.post(`/api/oldman/updateInfo/${t}`,e);200===a.data.code?(this.$message.success("信息更新成功"),this.initUserInfo()):this.$message.error(a.data.message||"信息更新失败")}catch(t){console.error("更新用户信息失败:",t),this.$message.error("信息更新失败，请稍后重试")}}},watch:{gender(e){localStorage.setItem("gender",e)}}},h=d,b=(0,c.A)(h,s,l,!1,null,"78380b4e",null),p=b.exports}}]);
//# sourceMappingURL=39.b97ce972.js.map