"use strict";(self["webpackChunkoldman_web"]=self["webpackChunkoldman_web"]||[]).push([[39],{5039:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-center"},[e._m(0),t("div",{staticClass:"main-content"},[t("aside",{staticClass:"sidebar"},[e._m(1),t("nav",{staticClass:"nav-menu"},[t("button",{class:["nav-item",{active:"basicInfo"===e.showSection}],on:{click:function(t){e.showSection="basicInfo"}}},[e._v("åŸºæœ¬èµ„æ–™")]),t("button",{class:["nav-item",{active:"changePassword"===e.showSection}],on:{click:function(t){e.showSection="changePassword"}}},[e._v("ä¿®æ”¹å¯†ç ")]),t("button",{class:["nav-item",{active:"aboutUs"===e.showSection}],on:{click:function(t){e.showSection="aboutUs"}}},[e._v("å…³äºæˆ‘ä»¬")])])]),t("main",{staticClass:"content"},["basicInfo"===e.showSection?t("section",{staticClass:"section-content"},[t("h2",{staticClass:"section-title"},[e._v("åŸºæœ¬èµ„æ–™")]),t("div",{staticClass:"form-content"},[t("div",{staticClass:"form-column"},[t("div",{staticClass:"form-item"},[t("label",[e._v("æ˜µç§°ï¼š")]),t("span",{domProps:{textContent:e._s(e.username)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("æ‰‹æœºå·ï¼š")]),t("span",{domProps:{textContent:e._s(e.phone)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("å¹´é¾„ï¼š")]),t("span",{domProps:{textContent:e._s(e.age)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("èº«é«˜(cm)ï¼š")]),t("span",{domProps:{textContent:e._s(e.height)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("ä½“é‡(kg)ï¼š")]),t("span",{domProps:{textContent:e._s(e.weight)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("è¡€å‹ï¼š")]),t("span",{domProps:{textContent:e._s(e.bloodType)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("ç­¾åï¼š")]),t("span",{domProps:{textContent:e._s(e.faction)}})])]),t("div",{staticClass:"form-column"},[t("div",{staticClass:"form-item"},[t("label",[e._v("ç´§æ€¥è”ç³»äººï¼š")]),t("span",{domProps:{textContent:e._s(e.emergencyContact)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("ç´§æ€¥ç”µè¯ï¼š")]),t("span",{domProps:{textContent:e._s(e.emergencyPhone)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("è¿‡æ•å²ï¼š")]),t("span",{domProps:{textContent:e._s(e.allergies)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("æ…¢æ€§ç—…å²ï¼š")]),t("span",{domProps:{textContent:e._s(e.chronicDiseases)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("æ‰€åœ¨åœ°åŒºï¼š")]),t("span",{domProps:{textContent:e._s(e.address)}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("å…´è¶£çˆ±å¥½ï¼š")]),t("span",{domProps:{textContent:e._s(e.hobbies)}})])])]),t("div",[t("button",{staticClass:"btn-primary",on:{click:function(t){return e.handleClick("ç¼–è¾‘èµ„æ–™")}}},[e._v("ç¼–è¾‘")])])]):e._e(),"changePassword"===e.showSection?t("section",{staticClass:"section-content"},[t("h2",{staticClass:"section-title"},[e._v("ä¿®æ”¹å¯†ç ")]),t("div",{staticClass:"password-form"},[t("div",{staticClass:"form-item"},[t("label",[e._v("åŸå¯†ç ï¼š")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword,expression:"oldPassword"}],staticClass:"input",attrs:{type:"password"},domProps:{value:e.oldPassword},on:{input:function(t){t.target.composing||(e.oldPassword=t.target.value)}}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("æ–°å¯†ç ï¼š")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],staticClass:"input",attrs:{type:"password"},domProps:{value:e.newPassword},on:{input:function(t){t.target.composing||(e.newPassword=t.target.value)}}})]),t("div",{staticClass:"form-item"},[t("label",[e._v("ç¡®è®¤å¯†ç ï¼š")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.IsnewPassword,expression:"IsnewPassword"}],staticClass:"input",attrs:{type:"password"},domProps:{value:e.IsnewPassword},on:{input:function(t){t.target.composing||(e.IsnewPassword=t.target.value)}}})])]),t("div",[t("button",{staticClass:"btn-primary",on:{click:e.changePassword}},[e._v("ä¿å­˜")])])]):e._e(),"aboutUs"===e.showSection?t("section",{staticClass:"section-content about-us"},[t("h2",{staticClass:"section-title"},[e._v("å…³äºæˆ‘ä»¬")]),e._m(2)]):e._e()])]),e.Visiable?t("dialog-component",{ref:"dialog"}):e._e()],1)},l=[function(){var e=this,t=e._self._c;return t("header",{staticClass:"header"},[t("div",{staticClass:"header-content"},[t("img",{attrs:{src:"img/logo.png",alt:"logo"}}),t("span",{staticClass:"header-title"},[e._v("oldman_healthy")])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"user-profile"},[t("div",{staticClass:"avatar"},[t("img",{attrs:{src:"img/robot.png",alt:"ç”¨æˆ·å¤´åƒ"}})]),t("div",{staticClass:"username"},[e._v("æ™ºéŸµå¤©æˆ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"about-content"},[t("div",{staticClass:"about-section"},[t("h3",[e._v("å…¬å¸ç®€ä»‹")]),t("p",[e._v("æ™ºéŸµå¤©æˆè‡´åŠ›äºä¸ºè€å¹´äººæä¾›æ™ºèƒ½å¥åº·ç®¡ç†æœåŠ¡ï¼Œè®©ç§‘æŠ€å®ˆæŠ¤å¥åº·ã€‚")])]),t("div",{staticClass:"about-section"},[t("h3",[e._v("æ ¸å¿ƒä»·å€¼è§‚")]),t("div",{staticClass:"values-grid"},[t("div",{staticClass:"value-item"},[t("i",{staticClass:"value-icon"},[e._v("â¤ï¸")]),t("p",[e._v("å…³çˆ±ä¸ºæœ¬")])]),t("div",{staticClass:"value-item"},[t("i",{staticClass:"value-icon"},[e._v("ğŸ”¬")]),t("p",[e._v("ç§‘æŠ€åˆ›æ–°")])]),t("div",{staticClass:"value-item"},[t("i",{staticClass:"value-icon"},[e._v("ğŸ¤")]),t("p",[e._v("ä¸“ä¸šæœåŠ¡")])])])]),t("div",{staticClass:"about-section"},[t("h3",[e._v("è”ç³»æˆ‘ä»¬")]),t("div",{staticClass:"contact-info"},[t("p",[t("i",{staticClass:"contact-icon"},[e._v("ğŸ“")]),e._v(" 17507522648")]),t("p",[t("i",{staticClass:"contact-icon"},[e._v("âœ‰ï¸")]),e._v(" 2106476452@qq.com")])])])])}],o=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:"æ›´æ–°",visible:e.detailVisible,width:"60%","custom-class":"custom-dialog"},on:{"update:visible":function(t){e.detailVisible=t}}},[t("el-form",{staticClass:"form-container",attrs:{"label-position":e.labelPosition,"label-width":"100px",model:e.formLabelAlign}},[t("div",{staticClass:"form-column"},[t("el-form-item",{attrs:{label:"æ˜µç§°"}},[t("el-input",{attrs:{placeholder:"è¯·è¾“å…¥æ˜µç§°"},model:{value:e.formLabelAlign.username,callback:function(t){e.$set(e.formLabelAlign,"username",t)},expression:"formLabelAlign.username"}})],1),t("el-form-item",{attrs:{label:"æ‰‹æœºå·"}},[t("el-input",{attrs:{placeholder:"è¯·è¾“å…¥æ‰‹æœºå·"},model:{value:e.formLabelAlign.phone,callback:function(t){e.$set(e.formLabelAlign,"phone",t)},expression:"formLabelAlign.phone"}})],1),t("el-form-item",{attrs:{label:"å¹´é¾„"}},[t("el-input",{attrs:{placeholder:"è¯·è¾“å…¥å¹´é¾„"},model:{value:e.formLabelAlign.age,callback:function(t){e.$set(e.formLabelAlign,"age",t)},expression:"formLabelAlign.age"}})],1),t("el-form-item",{attrs:{label:"èº«é«˜"}},[t("el-input",{attrs:{placeholder:"è¯·è¾“å…¥èº«é«˜(cm)"},model:{value:e.formLabelAlign.height,callback:function(t){e.$set(e.formLabelAlign,"height",t)},expression:"formLabelAlign.height"}})],1),t("el-form-item",{attrs:{label:"ä½“é‡"}},[t("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ä½“é‡(kg)"},model:{value:e.formLabelAlign.weight,callback:function(t){e.$set(e.formLabelAlign,"weight",t)},expression:"formLabelAlign.weight"}})],1),t("el-form-item",{attrs:{label:"è¡€å‹"}},[t("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©è¡€å‹"},model:{value:e.formLabelAlign.bloodType,callback:function(t){e.$set(e.formLabelAlign,"bloodType",t)},expression:"formLabelAlign.bloodType"}},[t("el-option",{attrs:{label:"Aå‹",value:"A"}}),t("el-option",{attrs:{label:"Bå‹",value:"B"}}),t("el-option",{attrs:{label:"Oå‹",value:"O"}}),t("el-option",{attrs:{label:"ABå‹",value:"AB"}})],1)],1),t("el-form-item",{attrs:{label:"å…´è¶£çˆ±å¥½"}},[t("el-select",{attrs:{multiple:"",placeholder:"è¯·é€‰æ‹©æ‚¨çš„å…´è¶£çˆ±å¥½"},model:{value:e.formLabelAlign.hobbies,callback:function(t){e.$set(e.formLabelAlign,"hobbies",t)},expression:"formLabelAlign.hobbies"}},e._l(e.hobbyOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("div",{staticClass:"form-column"},[t("el-form-item",{attrs:{label:"ç´§æ€¥è”ç³»äºº"}},[t("el-input",{staticStyle:{"min-width":"200px"},attrs:{placeholder:"è¯·è¾“å…¥ç´§æ€¥è”ç³»äººå§“å"},model:{value:e.formLabelAlign.emergencyContact,callback:function(t){e.$set(e.formLabelAlign,"emergencyContact",t)},expression:"formLabelAlign.emergencyContact"}})],1),t("el-form-item",{attrs:{label:"ç´§æ€¥ç”µè¯"}},[t("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç´§æ€¥è”ç³»ç”µè¯"},model:{value:e.formLabelAlign.emergencyPhone,callback:function(t){e.$set(e.formLabelAlign,"emergencyPhone",t)},expression:"formLabelAlign.emergencyPhone"}})],1),t("el-form-item",{attrs:{label:"è¿‡æ•å²"}},[t("el-input",{attrs:{type:"textarea",placeholder:"è¯·è¾“å…¥è¿‡æ•å²"},model:{value:e.formLabelAlign.allergies,callback:function(t){e.$set(e.formLabelAlign,"allergies",t)},expression:"formLabelAlign.allergies"}})],1),t("el-form-item",{attrs:{label:"æ…¢æ€§ç—…å²"}},[t("el-input",{attrs:{type:"textarea",placeholder:"è¯·è¾“å…¥æ…¢æ€§ç—…å²"},model:{value:e.formLabelAlign.chronicDiseases,callback:function(t){e.$set(e.formLabelAlign,"chronicDiseases",t)},expression:"formLabelAlign.chronicDiseases"}})],1),t("el-form-item",{attrs:{label:"ç­¾å"}},[t("el-input",{attrs:{placeholder:"è¯·è¾“å…¥ç­¾åï¼Œä¸èƒ½è¶…è¿‡126ä¸ªå­—"},model:{value:e.formLabelAlign.faction,callback:function(t){e.$set(e.formLabelAlign,"faction",t)},expression:"formLabelAlign.faction"}})],1),t("el-form-item",{attrs:{label:"åœ°åŒº"}},[t("el-select",{attrs:{placeholder:"è¯·é€‰æ‹©æ‚¨çš„åœ°åŒº"},model:{value:e.formLabelAlign.address,callback:function(t){e.$set(e.formLabelAlign,"address",t)},expression:"formLabelAlign.address"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)]),t("div",{staticClass:"dialog-footer"},[t("el-button",{attrs:{type:"primary",round:""},on:{click:e.save}},[e._v("ä¿å­˜")])],1)],1)},i=[],n={name:"dialogComponent",data(){return{detailVisible:!1,labelPosition:"right",formLabelAlign:{username:"",phone:"",faction:""},hobbyOptions:[{value:"é˜…è¯»",label:"é˜…è¯»"},{value:"ä¸‹æ£‹",label:"ä¸‹æ£‹"},{value:"ä¹¦æ³•",label:"ä¹¦æ³•"},{value:"ç»˜ç”»",label:"ç»˜ç”»"},{value:"å›­è‰º",label:"å›­è‰º"},{value:"å¤ªæ",label:"å¤ªæ"}],options:[{value:"åŒ—äº¬",label:"åŒ—äº¬"},{value:"ä¸Šæµ·",label:"ä¸Šæµ·"},{value:"å¹¿ä¸œ",label:"å¹¿ä¸œ"},{value:"å®‰å¾½",label:"å®‰å¾½"},{value:"æ²³å—",label:"æ²³å—"},{value:"å…¶ä»–",label:"å…¶ä»–"}],value:""}},methods:{init(e){this.detailVisible=!0,this.fetchData(e)},fetchData(){const e=localStorage.getItem("id");this.$axios.get(`/api/oldman/get/${e}`).then((e=>{if(200===e.data.code){const t=e.data.data;this.formLabelAlign={username:t.username,phone:t.phone,faction:t.faction,address:t.address,hobbies:t.hobbies,age:t.age,height:t.height,weight:t.weight,bloodType:t.bloodType,emergencyContact:t.emergencyContact,emergencyPhone:t.emergencyPhone,allergies:t.allergies,chronicDiseases:t.chronicDiseases},console.log(t)}else this.$message.error("è·å–æ•°æ®å¤±è´¥")})).catch((e=>{e.response?(console.error("æœåŠ¡å™¨å“åº”é”™è¯¯:",e.response.data),console.error("çŠ¶æ€ç :",e.response.status),console.error("å“åº”å¤´:",e.response.headers),this.$message.error("è·å–æ•°æ®å¤±è´¥: "+e.response.data.message)):e.request?console.error(e.request):console.error("Error",e.message),this.$message.error("è·å–æ•°æ®å¤±è´¥")}))},save(){const e=localStorage.getItem("id"),t=Array.isArray(this.formLabelAlign.hobbies)?this.formLabelAlign.hobbies.join(","):"";this.$axios.put(`/api/oldman/save/${e}`,{username:this.formLabelAlign.username,phone:this.formLabelAlign.phone,faction:this.formLabelAlign.faction,address:this.formLabelAlign.address,hobbies:t,age:this.formLabelAlign.age,height:this.formLabelAlign.height,weight:this.formLabelAlign.weight,bloodType:this.formLabelAlign.bloodType,emergencyContact:this.formLabelAlign.emergencyContact,emergencyPhone:this.formLabelAlign.emergencyPhone,allergies:this.formLabelAlign.allergies,chronicDiseases:this.formLabelAlign.chronicDiseases}).then((e=>{200===e.data.code?(localStorage.setItem("username",this.formLabelAlign.username),localStorage.setItem("phone",this.formLabelAlign.phone),localStorage.setItem("faction",this.formLabelAlign.faction),localStorage.setItem("address",this.formLabelAlign.address),localStorage.setItem("hobbies",JSON.stringify(t)),localStorage.setItem("age",this.formLabelAlign.age),localStorage.setItem("height",this.formLabelAlign.height),localStorage.setItem("weight",this.formLabelAlign.weight),localStorage.setItem("bloodType",this.formLabelAlign.bloodType),localStorage.setItem("emergencyContact",this.formLabelAlign.emergencyContact),localStorage.setItem("emergencyPhone",this.formLabelAlign.emergencyPhone),localStorage.setItem("allergies",this.formLabelAlign.allergies),localStorage.setItem("chronicDiseases",this.formLabelAlign.chronicDiseases),this.$message.success("æ›´æ–°æˆåŠŸ"),this.detailVisible=!1,window.location.reload()):this.$message.error("æ›´æ–°å¤±è´¥ï¼Œè¯·æ£€æŸ¥è¾“å…¥æ˜¯å¦æ­£ç¡®")})).catch((e=>{console.error("æ›´æ–°å¤±è´¥:",e),this.$message.error("æ›´æ–°å¤±è´¥ï¼Œè¯·æ£€æŸ¥è¾“å…¥æ˜¯å¦æ­£ç¡®")}))}}},r=n,c=a(1656),m=(0,c.A)(r,o,i,!1,null,"feae5dce",null),g=m.exports,d={name:"UserCenter",components:{dialogComponent:g},data(){return{showSection:"basicInfo",username:"",gender:"0",faction:"",phone:"",address:"",oldPassword:"",newPassword:"",IsnewPassword:"",Visiable:!1,hobbies:"",age:"",height:"",weight:"",bloodType:"",emergencyContact:"",emergencyPhone:"",allergies:"",chronicDiseases:""}},created(){this.initUserInfo()},methods:{async initUserInfo(){this.username=(localStorage.getItem("username")||"é»˜è®¤ç”¨æˆ·å").replace(/['"]/g,""),this.gender=(localStorage.getItem("gender")||"0").replace(/['"]/g,""),this.faction=(localStorage.getItem("faction")||"é»˜è®¤ç­¾å").replace(/['"]/g,""),this.phone=(localStorage.getItem("phone")||"é»˜è®¤æ‰‹æœºå·").replace(/['"]/g,""),this.address=(localStorage.getItem("address")||"é»˜è®¤åœ°å€").replace(/['"]/g,""),this.hobbies=(localStorage.getItem("hobbies")||"æš‚æ— å…´è¶£çˆ±å¥½").replace(/['"]/g,""),this.age=(localStorage.getItem("age")||"æœªè®¾ç½®").replace(/['"]/g,""),this.height=(localStorage.getItem("height")||"æœªè®¾ç½®").replace(/['"]/g,""),this.weight=(localStorage.getItem("weight")||"æœªè®¾ç½®").replace(/['"]/g,""),this.bloodType=(localStorage.getItem("bloodType")||"æœªè®¾ç½®").replace(/['"]/g,""),this.emergencyContact=(localStorage.getItem("emergencyContact")||"æœªè®¾ç½®").replace(/['"]/g,""),this.emergencyPhone=(localStorage.getItem("emergencyPhone")||"æœªè®¾ç½®").replace(/['"]/g,""),this.allergies=(localStorage.getItem("allergies")||"æ— ").replace(/['"]/g,""),this.chronicDiseases=(localStorage.getItem("chronicDiseases")||"æ— ").replace(/['"]/g,"")},handleClick(e){this.Visiable=!0,this.$nextTick((()=>{this.$refs.dialog.init(e)}))},async changePassword(){if(this.validatePasswordForm())try{const e=localStorage.getItem("id"),t=await this.$axios.post(`/api/oldman/changePassword/${e}`,{password:this.IsnewPassword});200===t.data.code?(this.$message.success("å¯†ç ä¿®æ”¹æˆåŠŸ"),this.resetPasswordForm()):this.$message.error(t.data.message||"å¯†ç ä¿®æ”¹å¤±è´¥")}catch(e){console.error("ä¿®æ”¹å¯†ç å¤±è´¥:",e),this.$message.error("å¯†ç ä¿®æ”¹å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}},validatePasswordForm(){return this.oldPassword&&this.newPassword&&this.IsnewPassword?this.newPassword!==this.IsnewPassword?(this.$message.warning("ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´"),!1):!(this.newPassword.length<6)||(this.$message.warning("æ–°å¯†ç é•¿åº¦ä¸èƒ½å°‘äº6ä½"),!1):(this.$message.warning("è¯·å¡«å†™å®Œæ•´çš„å¯†ç ä¿¡æ¯"),!1)},resetPasswordForm(){this.oldPassword="",this.newPassword="",this.IsnewPassword=""},async updateUserInfo(e){try{const t=localStorage.getItem("id"),a=await this.$axios.post(`/api/oldman/updateInfo/${t}`,e);200===a.data.code?(this.$message.success("ä¿¡æ¯æ›´æ–°æˆåŠŸ"),this.initUserInfo()):this.$message.error(a.data.message||"ä¿¡æ¯æ›´æ–°å¤±è´¥")}catch(t){console.error("æ›´æ–°ç”¨æˆ·ä¿¡æ¯å¤±è´¥:",t),this.$message.error("ä¿¡æ¯æ›´æ–°å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}}},watch:{gender(e){localStorage.setItem("gender",e)}}},h=d,b=(0,c.A)(h,s,l,!1,null,"78380b4e",null),p=b.exports}}]);
//# sourceMappingURL=39.b97ce972.js.map